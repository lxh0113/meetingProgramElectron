/* empty css               *//* empty css                  *//* empty css                    *//* empty css              *//* empty css                  *//* empty css               *//* empty css                *//* empty css              */import{c as O,g as R,a as Z,d as ee}from"./message-DKwYTu8g.js";/* empty css                     *//* empty css                   *//* empty css            *//* empty css               *//* empty css             *//* empty css               */import{u as te}from"./userStore-ZFrhfHK-.js";import{d as se,r as d,v as ae,o as n,c,b as s,e as l,w as a,f as le,ak as oe,F as w,A as j,i as _,Q as y,n as ne,ae as ie,a2 as re,U as de,h as r,t as u,y as f,z as x,X as ue,a4 as me,au as pe,a3 as ce,aI as _e,j as ve,k as fe,aw as ge,E as ye,ag as xe,_ as ke}from"./index-DUL14BUD.js";import"./http-BrEv2jN3.js";const Ve={class:"messageBox"},De={class:"left"},Ye={class:"title"},Me={class:"message"},Te={class:"avatar"},Ee={class:"content"},we={class:"messageTitle"},be={class:"operation"},Ce={class:"time"},Ie={style:{"margin-top":"20px",display:"flex","justify-content":"center"}},Ue={class:"right"},ze={class:"title"},Ae={class:"calendar"},Be={key:0,style:{"margin-top":"20px",color:"red"}},Pe={class:"card",style:{padding:"20px",display:"flex","justify-content":"space-between","align-items":"center","box-shadow":"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"}},je={class:"text",style:{"margin-right":"20px"}},Le={class:"itemTitle",style:{"font-size":"16px"}},Se={style:{"margin-top":"20px"}},$e={class:"dialog-footer"},Fe={key:0},Ne={class:"dialog-footer"},he=se({__name:"index",setup(He){const k=te(),p=d(!1),v=d(!1),V=d(1),b=d([]),g=d(""),D=d([]),Y=d([]),i=d({createTime:"",title:"",content:""}),C=d({totalMessages:1,pageSize:8});let M=1;const T=(o,e)=>{V.value=o,v.value=!0,M=e},L=async()=>{const o=await Z(k.user.id,M,y(i.value.createTime).format("YYYY-MM-DD hh:mm:ss"),i.value.title,i.value.content);o.data.code===200?(_.success("加入代办事件成功"),I()):_.error(o.data.message)},S=async()=>{(await ee(M)).data.code===200?(_.success("完成代办事项"),p.value=!1,U()):_.error("失败")},$=()=>{V.value===1?L():S(),v.value=!1},I=async()=>{const o=await O(k.user.id);o.data.code===200?(b.value=o.data.data.messagelist,C.value.totalMessages=o.data.data.totalMessages):_.error("获取失败")},U=async()=>{const o=await R(k.user.id,new Date().getFullYear(),new Date().getMonth()+1);o.data.code===200?D.value=o.data.data.messageToDoList:_.error(o.data.msg)},z=o=>D.value.filter(e=>y(e.createTime).format("YYYY-MM-DD")===o&&e.status==="0").length,F=o=>D.value.filter(e=>y(e.createTime).format("YYYY-MM-DD")===o),N=()=>{console.log(g.value),Y.value=F(y(g.value).format("YYYY-MM-DD")),p.value=!0};return ae(()=>{I(),U()}),(o,e)=>{const m=ne,h=me,H=pe,W=ie,Q=re,X=ce,q=xe,G=_e,A=de,B=ve,E=fe,J=ge,K=ye;return n(),c(w,null,[s("div",Ve,[s("div",De,[s("span",Ye,[e[11]||(e[11]=s("span",null,"消息列表",-1)),l(m,{onClick:e[0]||(e[0]=t=>T(1,1)),style:{"margin-left":"20px"},type:"primary",text:"",icon:le(oe)},{default:a(()=>e[10]||(e[10]=[r("添加代办事项")])),_:1},8,["icon"])]),(n(!0),c(w,null,j(b.value,t=>(n(),c("div",Me,[s("div",Te,[l(h,{size:50},{default:a(()=>[r(u(t.title),1)]),_:2},1024)]),s("div",Ee,[s("div",we,u(t.title),1),l(H,{"line-clamp":"1"},{default:a(()=>[r(u(t.content),1)]),_:2},1024)]),s("div",be,[s("div",Ce,u(t.createTime),1),s("div",null,[t.status==="0"?(n(),f(m,{key:0,onClick:P=>T(1,t.id),text:"plain",type:"primary"},{default:a(()=>e[12]||(e[12]=[r("加入代办事项")])),_:2},1032,["onClick"])):x("",!0)])])]))),256)),s("div",Ie,[l(W,{"page-size":5,total:C.value.totalMessages,background:"",layout:"prev, pager, next"},null,8,["total"])])]),s("div",Ue,[s("div",ze,[e[14]||(e[14]=s("span",{class:"title"},"代办事项",-1)),l(m,{onClick:N,style:{"margin-left":"20px"},text:"plain",type:"success"},{default:a(()=>e[13]||(e[13]=[r("查看当天代办事项")])),_:1})]),s("div",Ae,[l(Q,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t)},{"date-cell":a(({data:t})=>[s("p",{class:ue(t.isSelected?"is-selected":"")},u(t.day.split("-").slice(1).join("-"))+" "+u(t.isSelected?"✔️":""),3),z(t.day)?(n(),c("p",Be,u(z(t.day))+"条代办 ",1)):x("",!0)]),_:1},8,["modelValue"])])])]),l(A,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),title:"当天代办",draggable:"true",width:"500"},{footer:a(()=>[s("div",$e,[l(m,{onClick:e[2]||(e[2]=t=>p.value=!1)},{default:a(()=>e[16]||(e[16]=[r("取消")])),_:1}),l(m,{type:"primary",onClick:e[3]||(e[3]=t=>p.value=!1)},{default:a(()=>e[17]||(e[17]=[r(" 确认 ")])),_:1})])]),default:a(()=>[l(G,{size:"large",style:{"max-width":"600px"}},{default:a(()=>[(n(!0),c(w,null,j(Y.value,(t,P)=>(n(),f(X,{center:"",key:P,timestamp:t.createTime,placement:"top"},{default:a(()=>[s("div",Pe,[s("div",je,[s("h4",Le,u(t.title),1),s("p",Se,u(t.content),1)]),t.status==="0"?(n(),f(m,{key:0,onClick:We=>T(2,t.id),type:"primary"},{default:a(()=>e[15]||(e[15]=[r("完成")])),_:2},1032,["onClick"])):x("",!0)])]),_:2},1032,["timestamp"]))),128)),Y.value.length===0?(n(),f(q,{key:0,description:"无数据"})):x("",!0)]),_:1})]),_:1},8,["modelValue"]),l(A,{modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=t=>v.value=t),title:"注意",draggable:"true",width:"500"},{footer:a(()=>[s("div",Ne,[l(m,{onClick:e[8]||(e[8]=t=>v.value=!1)},{default:a(()=>e[18]||(e[18]=[r("取消")])),_:1}),l(m,{type:"primary",onClick:$},{default:a(()=>e[19]||(e[19]=[r(" 确认 ")])),_:1})])]),default:a(()=>[V.value===2?(n(),c("span",Fe,"您确定要完成当前代办事项吗？")):(n(),f(K,{key:1,model:i.value,"label-width":"70px","label-position":"right"},{default:a(()=>[l(E,{label:"标题"},{default:a(()=>[l(B,{modelValue:i.value.title,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.title=t),placeholder:""},null,8,["modelValue"])]),_:1}),l(E,{label:"内容"},{default:a(()=>[l(B,{modelValue:i.value.content,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.content=t),placeholder:""},null,8,["modelValue"])]),_:1}),l(E,{label:"创建时间"},{default:a(()=>[l(J,{modelValue:i.value.createTime,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.createTime=t),type:"datetime",format:"YYYY/MM/DD HH:mm:ss",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))]),_:1},8,["modelValue"])],64)}}}),dt=ke(he,[["__scopeId","data-v-d9571628"]]);export{dt as default};
