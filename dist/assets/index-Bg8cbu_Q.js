/* empty css               *//* empty css              *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css              */import{d as F,r as v,v as w,o as i,c as x,b as _,e as u,f as p,ac as P,ad as V,w as c,ay as B,ak as S,W as L,az as I,F as A,A as N,y,i as R,j,n as z,ae as K,h as m,ag as M,_ as T}from"./index-DUL14BUD.js";import{F as U}from"./forumCard-DTirKdU2.js";import{b as D,s as W}from"./forum-DEP0Z7Sx.js";import{u as q}from"./userStore-ZFrhfHK-.js";/* empty css             */import"./http-BrEv2jN3.js";const G={class:"recommendForumsBox"},H={class:"top"},J={class:"bottom"},O={style:{display:"flex","justify-content":"center","margin-top":"20px"}},Q=F({__name:"index",setup(X){const k=q(),o=v([]),$=async()=>{if(n.value.trim()!==""){d();return}const t=await D(k.user.id);t.data.code===200?o.value=t.data.data.recommended_posts:R.error("获取出错")},C=t=>{o.value[t].likes++},b=t=>{o.value[t].favorites++},n=v(""),f=v({currentPage:1,total:1,pageSize:8}),d=async()=>{if(n.value.trim()===""){d();return}const t=await W(n.value,f.value.currentPage);if(t.data.code===200){o.value=t.data.data.findPostVos,f.value.total=t.data.data.totalPages;const e=new RegExp(`(<[^>]*>)|(${n.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");o.value.forEach((s,r)=>{s.content=s.content.replace(e,(g,l,a)=>l||`<span style="font-weight:bold;color:red;">${a}</span>`),s.label=s.label.replace(e,(g,l,a)=>l||`<span style="color:red;">${a}</span>`)})}};return w(()=>{$()}),(t,e)=>{const s=j,r=z,g=K,l=M;return i(),x("div",G,[_("div",H,[u(s,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),placeholder:"请输入你所需要查询的内容","suffix-icon":p(P),style:{width:"300px","margin-right":"20px"},onKeyup:V(d,["enter"])},null,8,["modelValue","suffix-icon"]),u(r,{icon:p(B),type:"danger",onClick:e[1]||(e[1]=a=>t.$router.push("/forum/rank"))},{default:c(()=>e[4]||(e[4]=[m("排行榜")])),_:1},8,["icon"]),u(r,{icon:p(S),type:"success",onClick:e[2]||(e[2]=a=>t.$router.push("/forum/publish"))},{default:c(()=>e[5]||(e[5]=[m("发布新帖")])),_:1},8,["icon"]),u(r,{icon:p(L),type:"primary"},{default:c(()=>e[6]||(e[6]=[m("换一换")])),_:1},8,["icon"]),u(r,{type:"primary",text:"plain",icon:p(I),onClick:e[3]||(e[3]=a=>t.$router.push("/forum/my"))},{default:c(()=>e[7]||(e[7]=[m("我的个人主页")])),_:1},8,["icon"])]),_("div",J,[(i(!0),x(A,null,N(o.value,(a,h)=>(i(),y(U,{data:a,onChangeLike:E=>C(h),onChangeStar:E=>b(h)},null,8,["data","onChangeLike","onChangeStar"]))),256))]),_("div",O,[o.value.length?(i(),y(g,{key:0,background:"",layout:"prev, pager, next",total:f.value.total,change:d},null,8,["total"])):(i(),y(l,{key:1,description:"无数据"}))])])}}}),de=T(Q,[["__scopeId","data-v-f15455c9"]]);export{de as default};
