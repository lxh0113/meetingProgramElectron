/* empty css               *//* empty css                  *//* empty css                 *//* empty css              */import{_ as C,a as E,b as I}from"./loginImage-DzfJnP7g.js";import{e as v,p as B,c as T,s as U}from"./regexp-CBNzsOh-.js";import{r as q}from"./users-BJyTL3Zt.js";import{u as N}from"./userStore-ZFrhfHK-.js";import{d as R,r as h,a as S,o as A,c as D,b as o,e as t,w as l,E as F,f as _,p as M,l as P,q as $,h as c,t as j,i as n,j as z,k as G,n as L,m as O,s as W}from"./index-DUL14BUD.js";import"./http-BrEv2jN3.js";const H={class:"loginBack"},J={class:"center"},K={class:"loginBox"},ie=R({__name:"index",setup(Q){const a=h({email:"",password:"",captcha:""}),y=S({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:v,message:"请输入正确的邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:B,message:"至少包含字母、数字、其他字符，8-16位",trigger:"change"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:T,message:"验证码是6位数字",trigger:"change"}]});let u=60;const m=h("获取验证码"),w=N(),b=()=>{let s=setInterval(()=>{u--,u<0?(clearInterval(s),u=60,m.value="获取验证码"):m.value="还剩下"+u+"秒"},1e3)},k=async()=>{if(m.value!=="获取验证码"){n.error("验证码已发送");return}if(!v.test(a.value.email)){n.error("邮箱格式错误");return}const s=await U(a.value.email);s.data.code===200?(b(),n.success("验证码已发送")):n.error(s.data.message)},V=async()=>{const s=await q({email:a.value.email,password:a.value.password,emailCaptcha:a.value.captcha});if(s.data.code===200){let{id:e,account:p,avatar:r,email:d,phone:g,sex:f,username:x}={...s.data.data};w.setUserInfo({id:e,account:p,avatar:r,email:d,phone:g,sex:f,username:x}),setTimeout(()=>{n.success("注册成功")})}else n.error("注册失败")};return(s,e)=>{const p=z,r=G,d=L,g=O,f=W,x=F;return A(),D("div",H,[e[10]||(e[10]=o("img",{src:C,alt:"",class:"loginTopImage"},null,-1)),e[11]||(e[11]=o("img",{src:E,alt:"",class:"loginBottomImage"},null,-1)),o("div",J,[o("div",K,[e[7]||(e[7]=o("h3",null,"欢迎注册智会通",-1)),e[8]||(e[8]=o("h6",null,"WELCOME",-1)),t(x,{model:a.value,rules:y,size:"large",style:{"max-width":"360px",margin:"20px auto"}},{default:l(()=>[t(r,{prop:"email"},{default:l(()=>[t(p,{"prefix-icon":_(M),style:{height:"50px"},modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.email=i),placeholder:"请输入email"},null,8,["prefix-icon","modelValue"])]),_:1}),t(r,{prop:"password"},{default:l(()=>[t(p,{"prefix-icon":_(P),style:{height:"50px"},class:"loginInput",modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.password=i),placeholder:"请输入密码",type:"password"},null,8,["prefix-icon","modelValue"])]),_:1}),t(r,{style:{display:"flex"},prop:"captcha"},{default:l(()=>[t(p,{"prefix-icon":_($),style:{height:"50px",width:"238px"},modelValue:a.value.captcha,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.captcha=i),placeholder:"请输入验证码"},null,8,["prefix-icon","modelValue"]),t(d,{onClick:k,style:{height:"50px","margin-left":"10px"},type:"primary"},{default:l(()=>[c(j(m.value),1)]),_:1})]),_:1}),t(r,{style:{display:"flex","margin-bottom":"40px"}},{default:l(()=>[t(f,{style:{flex:"1","text-align":"left"}},{default:l(()=>[t(g,null,{default:l(()=>e[4]||(e[4]=[c(" 记住密码 ")])),_:1})]),_:1}),o("p",null,[e[5]||(e[5]=c(" 已有账号，")),o("span",{onClick:e[3]||(e[3]=i=>s.$router.push("/login")),style:{color:"#3578f6","font-weight":"bold",cursor:"pointer"}},"去登录")])]),_:1}),t(r,null,{default:l(()=>[t(d,{style:{width:"360px",height:"50px"},type:"primary",onClick:V},{default:l(()=>e[6]||(e[6]=[c("注册")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),e[9]||(e[9]=o("img",{class:"right",src:I,alt:""},null,-1))])])}}});export{ie as default};
