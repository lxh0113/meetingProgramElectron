/* empty css               *//* empty css                 *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css              *//* empty css              */import{F as D}from"./forumCard-DTirKdU2.js";/* empty css             */import{d as L,u as U,o as t,c as v,b as e,t as w,e as d,f as A,aA as H,V as B,aG as G,y as o,w as c,h as I,i as P,n as R,au as Z,aj as q,_ as V,r as i,v as J,a5 as K,F,A as E,ae as O,Z as Q,ag as W}from"./index-DUL14BUD.js";import{o as X}from"./forum-DEP0Z7Sx.js";import{u as $}from"./userStore-ZFrhfHK-.js";import{g as Y,a as tt,b as et,c as at}from"./users-BJyTL3Zt.js";import"./http-BrEv2jN3.js";const st={class:"title"},ot={class:"delete"},nt={class:"bottom"},lt={class:"details"},rt={class:"details"},it={class:"details"},ut=L({__name:"myForumItem",props:{data:{}},emits:["delete"],setup(T,{emit:u}){const k=U(),g=u,n=T,_=()=>{k.push("/forum/"+n.data.id)},x=$(),p=()=>{k.push("/forum/publish/"+n.data.id)},m=async l=>{if(!confirm("您确定要删除当前帖子吗"))return;(await X(n.data.id,x.user.id)).data.code===200?(P.success("删除成功"),g("delete")):P.error("删除失败")};return(l,s)=>{const y=R,h=Z,f=q;return t(),v("div",{class:"myCardBox",onClick:_},[e("span",st,w(n.data.label),1),e("span",ot,[d(y,{style:{border:"none","border-radius":"0px"},icon:A(H),type:"success",plain:"",onClick:B(p,["stop"])},null,8,["icon"]),d(y,{style:{"border-top-right-radius":"10px",border:"none","margin-left":"0"},icon:A(G),type:"primary",plain:"",onClick:B(m,["stop"])},null,8,["icon"])]),d(h,{"line-clamp":"5",style:{width:"100%","text-indent":"2rem",height:"180px"},innerHTML:n.data.content},null,8,["innerHTML"]),e("div",nt,[e("span",lt,[s[0]||(s[0]=e("span",{class:"iconfont icon-eye"},null,-1)),e("span",null,w(n.data.views),1)]),e("span",rt,[s[1]||(s[1]=e("span",{class:"iconfont icon-like"},null,-1)),e("span",null,w(n.data.likes),1)]),e("span",it,[s[2]||(s[2]=e("span",{class:"iconfont icon-star"},null,-1)),e("span",null,w(n.data.favorites),1)]),n.data.status==="0"?(t(),o(f,{key:0,type:"primary"},{default:c(()=>s[3]||(s[3]=[I("待审核")])),_:1})):n.data.status==="1"?(t(),o(f,{key:1,type:"success"},{default:c(()=>s[4]||(s[4]=[I("已发布")])),_:1})):(t(),o(f,{key:2,type:"danger"},{default:c(()=>s[5]||(s[5]=[I("存在违规内容")])),_:1}))])])}}}),dt=V(ut,[["__scopeId","data-v-d4a65034"]]),ct={class:"myForumBox"},pt={class:"forums"},mt={style:{"margin-top":"20px",display:"flex","justify-content":"center"}},gt={class:"forums"},_t={style:{"margin-top":"20px",display:"flex","justify-content":"center"}},yt={class:"forums"},ft={style:{"margin-top":"20px",display:"flex","justify-content":"center"}},vt={class:"forums"},Pt={style:{"margin-top":"20px",display:"flex","justify-content":"center"}},xt=L({__name:"index",setup(T){const u=i("first"),k=(a,b)=>{console.log(a,b),console.log(u.value),u.value==="first"?h():u.value==="second"?f():u.value==="third"?M():j()},g=$(),n=i([]),_=i({totalPosts:1,pageSize:5,currentPage:1}),x=i([]),p=i({totalPosts:1,pageSize:5,currentPage:1}),m=i([]),l=i({totalPosts:1,pageSize:5,currentPage:1}),s=i([]),y=i({totalPosts:1,pageSize:5,currentPage:1}),h=async()=>{const a=await Y(g.user.id,_.value.currentPage);a.data.code===200?n.value=a.data.data.posts:P.error("获取出错")},f=async()=>{const a=await tt(g.user.id,p.value.currentPage);a.data.code===200?(x.value=a.data.data.posts,p.value.totalPosts=a.data.data.totalPosts):P.error("获取出错")},M=async()=>{const a=await et(g.user.id,l.value.currentPage);a.data.code===200?(m.value=a.data.data.posts,l.value=a.data.data.totalPosts):P.error("获取出错")},j=async()=>{const a=await at(g.user.id,y.value.currentPage);a.data.code===200?(s.value=a.data.data.posts,y.value.totalPosts=a.data.data.totalPages):P.error(a.data.message)};return J(()=>{h()}),(a,b)=>{const C=W,z=O,S=Q,N=K;return t(),v("div",ct,[d(N,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=r=>u.value=r),type:"card",class:"demo-tabs",onTabClick:k},{default:c(()=>[d(S,{label:"我的帖子",name:"first"},{default:c(()=>[e("div",pt,[(t(!0),v(F,null,E(n.value,r=>(t(),o(dt,{data:r},null,8,["data"]))),256))]),e("div",mt,[n.value.length===0?(t(),o(C,{key:0,description:"无数据"})):(t(),o(z,{key:1,layout:"prev, pager, next","page-size":_.value.pageSize,total:_.value.totalPosts,"current-page":_.value.currentPage,onCurrentChange:h},null,8,["page-size","total","current-page"]))])]),_:1}),d(S,{label:"我的点赞",name:"second"},{default:c(()=>[e("div",gt,[(t(!0),v(F,null,E(x.value,r=>(t(),o(D,{data:r},null,8,["data"]))),256))]),e("div",_t,[x.value.length===0?(t(),o(C,{key:0,description:"无数据"})):(t(),o(z,{key:1,layout:"prev, pager, next","page-size":p.value.pageSize,"current-page":p.value.currentPage,total:p.value.totalPosts,onCurrentChange:f},null,8,["page-size","current-page","total"]))])]),_:1}),d(S,{label:"我的收藏",name:"third"},{default:c(()=>[e("div",yt,[(t(!0),v(F,null,E(m.value,r=>(t(),o(D,{data:r},null,8,["data"]))),256))]),e("div",ft,[m.value.length===0?(t(),o(C,{key:0,description:"无数据"})):(t(),o(z,{key:1,layout:"prev, pager, next","page-size":l.value.pageSize,total:l.value.totalPosts,"current-page":l.value.currentPage,onCurrentChange:M},null,8,["page-size","total","current-page"]))])]),_:1}),d(S,{label:"我的关注",name:"fourth"},{default:c(()=>[e("div",vt,[(t(!0),v(F,null,E(m.value,r=>(t(),o(D,{data:r},null,8,["data"]))),256))]),e("div",Pt,[m.value.length===0?(t(),o(C,{key:0,description:"无数据"})):(t(),o(z,{key:1,layout:"prev, pager, next","page-size":l.value.pageSize,total:l.value.totalPosts,onCurrentChange:M},null,8,["page-size","total"]))])]),_:1})]),_:1},8,["modelValue"])])}}}),Lt=V(xt,[["__scopeId","data-v-47bda527"]]);export{Lt as default};
